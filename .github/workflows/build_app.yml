name: 2. Build App Update (Auto)

on:
  push:
    paths:
      - 'src/**'
      - 'resources/**'
      - '*.bat'
      - 'README.md'
  workflow_dispatch:

jobs:
  package-update:
    runs-on: windows-latest
    
    steps:
    - name: Checkout Code
      uses: actions/checkout@v3

    - name: ðŸ“‚ Ordnerstruktur vorbereiten
      shell: cmd
      run: |
        mkdir Update
        xcopy /E /I /Y "src" "Update\src"
        xcopy /E /I /Y "resources" "Update\resources"
        
        REM Dateien sicher kopieren
        if exist "START.bat" copy "START.bat" "Update\"
        if exist "README.md" copy "README.md" "Update\"

    # HIER HABEN WIR DEN ZIP-SCHRITT ENTFERNT!
    # Wir laden direkt den Ordner hoch.

    - name: ðŸ“¤ Als Artifact hochladen
      uses: actions/upload-artifact@v4
      with:
        name: LQAG_Latest_Update
        path: Update/
