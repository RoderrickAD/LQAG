name: Update Code Only

# Startet automatisch, wenn du Code hochl√§dst (Push)
on:
  push:
    paths:
      - 'src/**'       # Nur wenn sich was im src Ordner √§ndert
      - 'START.bat'    # Oder die Start-Datei
      - 'resources/**' # Oder Bilder

permissions:
  contents: write

jobs:
  build-update:
    runs-on: windows-latest
    
    steps:
    - name: Checkout Code
      uses: actions/checkout@v3

    # Wir zippen NUR den Code (das ist winzig, nur ein paar Kilobyte)
    - name: ü§ê Code Zippen (Update Patch)
      run: |
        # Wir zippen src, resources und die Bat-Datei
        7z a -tzip LQAG_Update.zip src resources START.bat

    # Wir laden es als "Release" hoch, nicht als Artifact (besser f√ºr Speicher)
    - name: üöÄ Update bereitstellen
      uses: softprops/action-gh-release@v1
      with:
        tag_name: Update-${{ github.run_number }}
        name: "Code Update v${{ github.run_number }}"
        body: |
          ### Kleines Code-Update
          Dies enth√§lt nur die Logik-Dateien.
          
          **Installation:**
          1. Runterladen.
          2. Einfach in deinen Ordner entpacken und "√úberschreiben" w√§hlen.
          3. Die Engine bleibt unber√ºhrt!
        draft: false
        prerelease: false
        files: LQAG_Update.zip
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
